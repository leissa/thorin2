// RUN: rm -f %t.ll
// RUN: %thorin %s --output-ll %t.ll -o -

.plugin core;
.plugin memoir;

.fun .extern f(mem: %mem.M): [%mem.M, .I64] =
    .let `assoc = %memoir.empty (.I32, .I64);
    .let `assoc = %memoir.write (assoc, 0I32, 10I64);
    .let `assoc = %memoir.write (assoc, 1I32, 11I64);
    .let val    = %memoir.read  (assoc, 0I32);
    return (mem, val);
